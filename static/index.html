<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="style.css" rel="stylesheet">
    <title>Sundsvalls lunch</title>
  </head>
  <body onload="fetchMenus()">
    <script>
        function getDay()
        {
            const weekday = ["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];
            let dayIndex = new Date().getDay();
            // No weekend for you
            if (dayIndex == 0 || dayIndex == 6)
            {
                dayIndex = 1;
            } 
            return weekday[dayIndex];
        }

        async function fetchMenus()
        {
            const res = await fetch("./menus.json");
            const menus = await res.json();
            const container = document.getElementById("container")
            for (const menu of menus)
            {
                if (menu.failed)
                {
                    break;
                }
                const div = document.createElement("div");
                div.className = "item";
                let h2 = document.createElement("h2");
                h2.innerText = menu.name;
                div.appendChild(h2);
                const ul = document.createElement("ul");
                div.appendChild(ul)
                for (const course of menu.menu[getDay()])
                {
                    let li = document.createElement("li");
                    li.innerText = course;
                    ul.appendChild(li);
                }
                container.appendChild(div);
            }
        }
    </script>
    <h1 class="main-header">Sundsvalls lunch</h1>
    <div class="container" id="container">
    </div>
  </body>
</html>
